Hola qué tal YouTube videntes Bienvenidos a una nueva entrega de este curso de Oracle sql desde cero en el día de hoy vamos a aprender sobre las secuencias en Oracle sql Qué es una secuencia una secuencia es una funcionalidad que se emplea para generar valores enteros secuenciales y que sean únicos estos valores pues serán asignados a Campos numéricos y se utilizan Generalmente para claves primarias o primary Keys Recuerden que Estuvimos viendo claves primarias en videos anteriores Pues en el día de hoy veremos cómo las secuencias trabajan unidas a estas restricciones para garantizar que los valores de las mismas no se repitan Al momento de utilizarse en una tabla una secuencia es una especie de tabla con un campo numérico en el cual se almacena un valor que cada vez que se consulta Se incrementa para ser reflejado en la siguiente consulta y en la siguiente y en la siguiente las secuencias están compuestas por un nombre de secuencia que es para ser identificada en el explorador de objetos Si vemos aquí en el explorador de objetos vemos eh donde dice secuencias cuando desplegamos la cruz vemos Que no hay nada porque no hemos creado todavía ninguna Pues en este en este almacenador de secuencias del explorador de objetos es en donde se almacenan con un nombre identificativo Igualmente las secuencias también contienen un valor entero que es un valor que va incrementando a medida que se va reutilizando la misma en las consultas este valor entero Define el valor máximo de la secuencia y el valor mínimo de la misma de igual modo una secuencia Pues también va definida por un ciclo que indica que cuando la misma llega a su fin pues retorna de nuevo a un valor inicial esto Claro sí se define en la configuración vamos de inmediato entonces a pasar a los ejemplos demostrativos de cómo funcionan las secuencias en sql primero vamos a ver como nuestro sql developer trabaja de manera gráfica manejando secuencias no vamos a ir al explorador de objetos y vamos a hacer clic donde dice secuencias posteriormente hacemos clic derecho y le damos a Nueva secuencia nos despliega esta ventana y aquí en esquema vamos a dejar el que ya tenemos seleccionado que es el esquema de curso plsql que creamos para el desarrollo del curso si hacemos un clic en la lista de esquema podemos ver todos los esquemas disponibles que ya están creados en la base de datos estos se crean Al momento de su instalación excepto el que cre creamos nosotros para el curso en nuestro video pasado de creación de usuarios posteriormente vemos donde dice nombre vamos a colocarle un nombre a la secuencia para identificarla y le vamos a decir secuencia libros vamos a colocarle ese nombre posteriormente donde dice empezar por vamos a decirle que la secuencia va a iniciar contabilizando desde el número uno el primer valor de la secuencia será uno en la opción aumentarle vamos a decir que la misma va a a incrementar su valor de uno en uno si colocá un dos la secuencia iría incrementando de dos en dos en este caso vamos a colocarle un uno y le vamos a decir que el valor mínimo va a ser Igualmente uno ya que es el valor más pequeño por donde empieza la secuencia va de menor a mayor Pues el valor mínimo es uno en la opción valor máximo vamos a colocar un 9,999 ese va a ser nuestro valor máximo hasta ahí va a llegar la secuencia las demás opciones no la tocamos y presionamos aceptar nos vamos al explorador de objetos fíjense aquí ya como el sistema nos dice que se creó la secuencia libros si le hacemos un clic vemos los detalles de la creación de la misma su fecha de creación si ven que el sistema coloca dos fechas idénticas es porque dice que se creó en el campo create dice la fecha de creación y en este campo que dice last ddl time no es más que el campo que recibe la última instrucción o posible actualización que se le hizo esta secuencia como no se le ha hecho ninguna y está nueva pues es la misma que la de creación este campo que dice sequence erer lo que nos dice es el esquema en el que se creó la secuencia el nombre en sequence name min value que es el valor mínimo Max value que es el valor máximo increment by que nos dice De cuánto en cuanto va incrementando la secuencia Y estos demás Campos que se quedan por defecto que fueron en donde no configuramos nada ya que no nos erá útil por ahora y bien así terminamos de crear nuestra secuencia en modo gráfico utilizando el es sql developer y bien lo que sigue ahora pues es iniciar nuestra secuencia que acabamos de crear para iniciar la secuencia colocamos la instrucción Select y luego colocamos el nombre de la secuencia secuencia libros colocamos punto y decimos next Val luego decimos que haga todo esto utilizando la tabla Dual colocamos punto y coma y ejecutamos la instrucción y el sistema nos dice next Val 1 Esto indica que se inició la secuencia se creó el primer valor que es uno esto es porque la función next B ejecuta los valores consecuentes de la secuencia en el estado que estén como esta está recién creada Pues el next Val el primer valor que va a ejecutar es el uno y Consecuentemente queda iniciada la misma se utiliza la tabla Dual porque no hemos enlazado nuestra secuencia a ninguna tabla Bueno pues ahora vamos a poner en funcionamiento nuestra secuencia para ver cómo trabaja vamos a eliminar la tabla libros que teníamos creada previamente en el sistema vamos a decirle Drop Table libros colocamos punto y coma y con esto borramos la tabla libros que habíamos ya creado anteriormente Y pues vamos a proceder a crearla de nuevo con las condiciones para poder utilizar la secuencia que acabamos de crear vamos a decirle create Table libros abrimos paréntesis y creamos el primer campo que sería ID libro que va a ser de valor entero y será not nul vamos a decirle que va a ser de tipo primary key luego colocamos una coma configuramos el segundo campo que sería título de tipo marchar de tamaño 40 Igualmente va a ser obligatorio colocamos una coma luego vamos a crear el campo autor el mismo modo barar 40 este puede ser nul Y por último el campo precio de tipo number que sea de cinco cifras con dos valores decimales cerramos paréntesis y posteriormente Cerramos el paréntesis de creación de la tabla colocamos punto y coma y ejecutamos la instrucción y el sistema nos dice que se creó correctamente la tabla vamos a hacer un Select Y aquí están los campos que acabamos de crear entonces pues vamos a proceder a insertar registros en nuestra tabla primer registro que vamos a insertar será la secuencia ya que la secuencia se va a ir almacenando en nuestro campo ID libro Recuerden que debe ser de tipo entero lo creamos como tipo entero y las secuencias únicamente trabajan con campos de tipo entero vamos a insertar Entonces el primer valor de nuestra secuencia esto se hace colocando el nombre de la secuencia y colocando un punto le decimos curval es decir el valor actual de la secuencia en el momento de insertar ese registro colocamos una coma procedemos a colocar el título cerramos comilla coma el autor y por último el precio cerramos paréntesis colocamos punto y coma cuando ejecutamos esta instrucción Aquí vemos el sistema nos dice una fila insertada hacemos un Select y aquí está fíjense como el sistema nos trae el primer registro ingresado con el valor de ID libro 1o Ya que en la secuencia es el valor correspondiente al colocar en el primer registro a insertar en la tabla el nombre de la secuencia que acabamos de crear y la función curval el sistema Busca el valor actual de la secuencia y lo coloca en el primer campo En este caso ID libro porque es el primer registro que se le pasa a la tabla y el valor actual de la secuencia en ese momento curvado es uno vamos a hacer un segundo insert de registro la tabla vamos a decirle insert into libros y en los valores vamos a colocar el primer valor secuenci libros punto y fíjense como el sistema nos dice secuenci libros next Val es decir la instrucción que va es secuenci libros punn Val es decir el valor siguiente de la secuencia luego posteriormente decimos next pad colocamos una coma y el nombre del siguiente libro y el autor posteriormente el precio cerramos paréntesis colocamos punto y coma y ejecutamos la instrucción realizamos la consulta correspondiente a la tabla y aquí está fíjense segundo registro y tiene ID libro número dos que hizo el sistema en la secuencia que le indicamos como primer registro a insertar el next Bad es decir el valor siguiente el curbal que es el primero que se coloca cuando se inserta un primer registro utilizando secuencia colocó número uno por lo tanto el next Val que es el valor siguiente para el registro dos es el número dos Recuerden que la secuencia va incrementando de uno en uno vamos ahora proceder a hacer un truncate a la tabla de libros porque nos toca ver cómo trabajar las secuencias por vía de código recuérdense que aquí lo hicimos en el editor de objet por vía gráfica Pues ahora lo vamos a ver vía código vamos a decirle al sistema trunk Table libros colocamos punto y coma ejecutamos la instrucción el sistema nos dice que se truncó la tabla Recuerden que el truncate lo que hace es que elimina los registros limpiamente de la tabla sin tocar la estructura de la misma si decimos Select asterisco libros no hay ningún registro porque los acab acabamos de limpiar vamos a proceder entonces a eliminar la secuencia que acabamos de crear igualmente y cómo se elimina una secuencia con la instrucción Drop sequence y el nombre de la secuencia que sería secuencia libros colocamos punto y coma y el sistema nos confirma que se eliminó la secuencia Drop sequence y el nombre de la secuencia en este caso secuencia libros entonces pues vamos a dejar los insert porque los vamos a utilizar cuando estemos probando la nueva secuencia que crearemos vía código vamos a refrescar el explorador de objetos ya no hay ninguna otra secuencia creada y Aquí vemos que ya está vacío el objeto secuencias vamos a hacer un espacio recuerden no borrar los insert pero sí vamos a borrar esta instrucción entonces pues vamos a proceder a crear la secuencia libros vía código vamos a decirle al sistema create sequence y el nombre de la secuencia secuencia libros en este caso lo vamos a hacer sin el guion para facilidad de manejo luego colocamos Start with y colocamos un uno posteriormente le decimos increment by un luego Max value y decimos 9999 por último debajo decimos min value uno la instrucción Max value aquí es va junto todo igual que minvu vamos a colocarle la instrucción cycle colocamos punto y coma y ejecutamos toda esta instrucción el sistema nos dice que la nueva secuencia secuencia libros ya fue creada refrescamos el explorador de objetos y aquí la vemos correctamente creada y bien luego de creada la secuencia Pues procedemos a iniciar la misma con la función next Val y le decimos Select secuenci libros next Val frontal ejecutamos la instrucción y aquí está nos coloca un uno ya iniciamos nuestra nueva secuencia vamos entonces a proceder a insertar valores en la tabla libros utilizando nuestra secuencia libros que acabamos de crear Recuerden que se hace primero la instrucción curval Recuerden que deben colocar el nuevo nombre de secuencia en la primera instrucción ejecutamos la primera nos dice una fila insertada hacemos el Select correspondiente y aquí está primer valor insertado uno vamos a insertar Entonces los segundos registros recuerden cambiar el nombre a secuencia libros que es la nueva secuencia que creamos vía código y ejecutamos la instrucción Confirmamos que se insertó correctamente la fila y cuando consultamos Aquí está nuestra segunda fila y ya del mismo modo si seguimos insertando registros en la tabla utilizando esta secuencia todos los demás Igualmente llevarán la función next Val ya que solo el primer registro aplica la función curval todos los demás registros después del primero 2 3 4 5 etcétera son con la función next Val aquí en el explorador de objetos vemos en secuencias el nombre de la secuencia que acabamos de crear y todas las demás que vayamos creando se Irán almacenando ahí pero podemos ejecutar la instrucción Select asterisco from all sequence y cuando colocamos un punto y coma el sistema nos trae todas las secuencias creadas Al momento de crear la base de datos estas se crearon originalmente cuando instalamos y configuramos el motor de base de datos para ver la secuencia libros le decimos al sistema Where el nombre del campo que es sequence name igual a y colocamos el nombre de la secuencia secuencia libre cuando ejecutamos la instrucción Aquí vemos la secuencia que acabamos de crear el esquema al que pertenece el nombre el valor mínimo el valor máximo y su incremento Igualmente en el campo ccle flag lo que nos dice con esa Y es que la secuencia es cíclica cuando llega su valor máximo pasa de nuevo al valor uno una secuencia cíclica de tener una n Pues indicaría que al llegar al último valor Pues el sistema nos da un aviso de que ya la misma no puede seguir siendo utilizada y bien YouTube videntes Eso es todo por ahora respecto a las secuencias en oracol sql gracias por su atención y nos vemos en una siguiente entrega así que hasta pronto