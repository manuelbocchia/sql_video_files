Hola qué tal YouTube videntes bienvenidos una vez más a este su curso de Oracle sql desde cero continuamos viendo más del extenso historial de funciones internas de Oracle sql y ahora vamos a ver cómo trabaja la función growth byy la función Group by en Oracle sql eh especifica que una instrucción una consulta devuelve una lista que está agrupada por una o más columnas es decir al momento de ejecutar una consulta utilizando la función groupby en el resultado veremos una agrupación en una columna específica de la cantidad de registros consultados en dicha sentencia para los ejemplos de la lección del día de hoy Les voy a dejar en la descripción del video las instrucciones los códigos para crear una nueva tabla con la que vamos a trabajar y la vamos a copiar posteriormente pegamos todo en nuestro editor de códigos y ejecutamos luego pues Confirmamos la creación de la tabla y la inserción de todas las filas sin errores limpiamos nuestro editor y limpiamos nuestra salida de consola refrescamos nuestro explorador de objetos y aquí vemos creada correctamente la tabla visitantes en el listado de tablas hacemos un Select y aquí Confirmamos los registros que se insertaron en la misma Vamos de inmediato a ver cómo trabaja la función grp by con un primer ejemplo vamos a hacer una consulta para que el sistema no nos diga Cuántos visitantes están ingresados en la tabla y que los agrupe por ciudad esto lo haríamos diciendo Select colocamos el nombre del campo ciudad colocamos una coma luego colocamos la función count abrimos paréntesis colocamos un asterisco cerramos y decimos que haga todo esto desde la tabla visitantes posteriormente le decimos grou by y colocamos ciudad colocamos punto y coma y ejecutamos y aquí pues vemos el resultado el sistema nos dice de Cuántas ciudades nos dice la cantidad de visitantes por ciudad analicemos la consulta selección el campo ciudad de la tabla visitantes Dime cuántos registros fueron insertados en este campo y agrúpalos por ciudad y este es el resultado que nos trae para utilizar la función grow by fíjense que primero ejecutamos la función count porque la función count es la que va a buscar la cantidad de registros por cada campo le decimos selecciona ciudad y al colocar count asterisco el sistema Busca todos los registros ingresados en este campo de la tabla visitantes y posteriormente los agrupamos específicamente por ciudad y el resultado es una tabla de dos Campos en primer campo nos pone la ciudad y en el segundo campo la cantidad de visitantes ingresados por cada una de ellas Bien ahora vamos eh a hacer una consulta a a la tabla vamos a ver ahora otro ejemplo de cómo realizar consultas con la función grow by vamos a decirle al sistema que nos diga Cuántos de Los visitantes tienen número telefónico y que nos lo agrupe por ciudad Esto se logra diciendo Select colocamos ciudad que es el campo por el que vamos a agrupar la consulta y luego utilizando la función count abrimos asterisco y colocamos teléfono que es la cantidad de registro que queremos saber cantidad de teléfonos luego posteriormente le decimos que haga todo esto desde la tabla visitantes y que lo agrupe por ciudad colocamos punto y coma y ejecutamos y aquí está nos dice cuántos visitantes tienen teléfono ingresado en la tabla agrupados por ciudad volvemos a hacer otra consulta a la tabla bien Estuvimos viendo Entonces cómo trabaja la función grow byy en conjunto con la función count ahora vamos a ver cómo trabaja la misma función grow byy en conjunto con la función zoom vamos a decirle al sistema que nos traiga el total de compras de Los visitantes ingresados en la tabla y que los agrupe por género vamos a decirle al sistema Select ingresamos el campo sexo colocamos una coma decimos zoom y dentro de paréntesis colocamos el campo monto compra cerramos paréntesis todo esto desde la tabla visitantes y luego debajo vamos a especificar que lo agrupe todo por género en este caso campo sexo colocamos punto y coma y aquí nos dice que hay un error en la línea ocho al parecer colocamos Dos punto y coma hay que quitar este Y ejecutamos de nuevo ahora sí nos dice el sistema la sumatoria total de las compras agrupadas por género vemos un valor nulo indica que hay un registro del campo género que está como nulo pero que de todos modos contiene registro de monto de compra por eso Entonces el sistema lo trae como nulo si quisiéramos no ver el registro nul recordamos la instrucción con la cláusula we y le decimos que en el campo sexo nos traiga los valores que no sean nulos y le decimos is not nul ejecutamos entonces la instrucción y aquí nos elimina Entonces ya el campo nulo nos trae la sumatoria total de las compras agrupadas por género femenino masculino Esta es la combinación de la función Group Buy con la función zoom todo en una misma consulta del mismo modo la función Group by también puede trabajar con más de un campo momento de traer una consulta hemos estado utilizando solamente un campo pero también puede funcionar agrupando varios Campos vamos a hacer una consulta combinando con la función Max y min para ir practicando con estas funciones que vimos en en anteriores videos pero aquí podemos darle utilidad en el ejemplo vamos a decirle al sistema Select colocamos el campo c una coma vamos a colocar el campo ciudad otra coma y vamos a decirle que nos traiga el máximo del monto de compras en un campo que se llame mayor cerramos doble comilla vamos a colocar una coma y que nos traiga el mínimo de montos de compra cerramos paréntesis en un campo que se llame menor cerramos doble comillas le decimos que haga todo esto desde la tabla visitantes en la siguiente línea Entonces vamos a decirle que defina todo esto utilizando la cláusula Root by utilizando el campo sexo y el campo ciudad cuando ejecutamos la instrucción aquí nos dice que hay un error en el campo monto compras identificador inválido la s mírenlo aquí donde lo dice que la s es un identificador inválido es lo que dice el error Por lo tanto hay que quitar esta s ejecutamos de nuevo y ahora sí la consulta Pues nos trae el género y la ciudad de la tabla visitantes y nos hace un cálculo del máximo monto de compra en un campo que se llame mayor y el mínimo monto de compras en un campo que se llame menor de la tabla y que agrupe todo esto por el campo sexo y ciudad fíjense Entonces cómo nos trae el máximo monto de compras en este campo el menor monto de compras la ciudad que es lo que le pedimos aquí y el campo sexo aquí lo tenemos hace el Select a los dos Campos y luego pues al final agrupa todo en los dos Campos que seleccionamos anteriormente Y aquí están agrupados toda la consulta agrupada en dos Campos si quisiéramos realizar esta consulta agrupando todo solo en un campo pues daría un error y aquí el sistema dice que no es una expresión growth by nos dice que la expresión growth by está mal elaborada porque estamos seleccionando dos Campos Cuando se utiliza la función gr bu se debe agrupar por tantos Campos se coloque al principio del Select si en este caso colocamos solamente uno y genera el error porque estamos seleccionando dos Campos no importa el cálculo o la función con la que se combine el Group by siempre va a tomar los o el campo que se tome al principio del Select en este caso hay dos por lo que en el Cruise by hay que colocarle esos mismos dos Campos entonces colocamos ciudad que es el segundo y ahí está la consulta correctamente y bueno eso es todo por ahora referente a la función de agrupación grow by en Oracle sql más adelante Seguiremos viendo más y más funciones internas de Oracle para elaborar consultas continúen con las prácticas propias utilizando valores intercambiando Campos y nos veremos Pues en una siguiente entrega gracias por su atención y hasta pronto