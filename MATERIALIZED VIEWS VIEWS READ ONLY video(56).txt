hola que tal youtube videntes bienvenidos una vez más a una nueva entrega de este curso de oracle sql desde cero vamos a continuar en el día de hoy trabajando con las vistas en sql y hoy veremos el tema de las vistas con restricción read only only que es una funcionalidad de ahora con sql para proteger las vistas que tengamos creadas en el sistema para evitar que se hagan modificaciones utilizando su ejecución como siempre en la descripción del vídeo les dejo las instrucciones para la eliminación de una tabla de clientes que teníamos anteriormente creada y su recreación con la inserción de los registros que vamos a necesitar para la lección de hoy vamos a copiar todas estas instrucciones y las vamos a pegar en nuestro editor de esta manera posteriormente pues ejecutamos y verificamos que se borró nuestra tabla anterior y se creó nuestra nueva tabla y se insertaron correctamente todos los registros que necesitamos limpiamos nuestro editor de texto limpiamos nuestra salida de consola y procedemos a ser un select a nuestra tabla de clientes y aquí están los registros con los que vamos a trabajar el día de hoy de inmediato vamos pues a proceder a crear una vista utilizando esta tabla a la cual vamos a llamar beyond clientes para esto decimos create por ry podéis view y colocamos prefijo be guión clientes luego debajo colocamos función as y debajo decimos select nombre coma ciudad y luego debajo colocamos from clientes punto y coma que estamos haciendo con esto le decimos al sistema crear si no existe o reemplaza si ya existe una vista que tenga por nombre beyond clientes que va a ser esta vista pues esta vista va a seleccionar nos el nombre y la ciudad el campo nombre y el campo ciudad de nuestra tabla de clientes justo como se lo decimos aquí seleccionamos entonces la instrucción y la ejecutamos el sistema nos dice que se creó correctamente nuestra vista así que de inmediato hacemos select para confirmarlo 2 select asterisco from beyond clientes monte coma seleccionamos ejecutamos y aquí están los registros que le pedimos acá a nuestra vista que nos trajera como indicamos anteriormente a una vista se le pueden ejecutar modificaciones a través de ella misma esto podemos comprobarlo haciendo un insert a la tabla de clientes para esto podemos decir insert into el nombre de la vista be guión clientes salud abrimos un paréntesis vamos a colocar aquí el primer campo que necesitamos que es nombre vamos a colocarle el nombre de miguel monegro vamos a colocar comillas y luego una coma abrimos comillas de nuevo y colocamos la ciudad que es el campo siguiente vamos a colocar san salvador cerramos comillas cerramos paréntesis punto y coma cuando seleccionamos toda esta instrucción el sistema nos dice se insertó correctamente un registro si hacemos de nuevo un select a nuestra vista de clientes vemos el registro que acabamos de insertar utilizando la vista si hacemos un select a nuestra tabla de clientes verificamos que se insertó correctamente el nombre y la ciudad que colocamos en el insert utilizando la vista de por medio ya que estamos utilizando los campos de nuestra tabla de clientes los que está manejando la vista sin embargo domicilio y documento están null ya que aquí sólo hicimos el insert a los campos nombre y ciudad utilizando la vista por lo tanto el sistema utiliza la vista como intermedio para mandar estos dos registros a la tabla de clientes dejando vacíos los campos a los que no les fue insertado ningún registro apareciendo como nulo entonces cómo podemos hacer que nuestra vista no permita insertar registros en una tabla a través de ella misma eso lo hacemos con la instrucción read only como vemos aquí en la creación de nuestra vista simplemente lo que tendríamos que hacer para proteger que no se inserte registros es colocando debajo la instrucción with it only y con esta instrucción ya estamos bloqueando cualquier facilidad de modificación de nuestra tabla utilizando la vista que acabamos de crear seleccionamos todo esto de nuevo y ejecutamos otra vez el sistema nos dice que la vista fue creada a pesar de que ya estaba creada dice que fue creada porque la instrucción dice crea si no existe o reemplaza si existe en este caso está reemplazando la vista de que un cliente que teníamos creada anteriormente cuando hacemos un selecto nuestra vista de nuevo y están registros con los que se creó y en este caso vamos a hacer de nuevo un insert vamos a intentar insertar un registro en nuestra vista de clientes en este caso vamos a cambiar estos registros vamos a utilizar el nombre julio moncada vamos a colocar comillas coma y comillas de nuevo vamos a colocar la ciudad la paz y cerramos comillas el final para inducir punto y coma seleccionamos y ejecutamos el insert y que tenemos aquí tenemos un bloqueo de parte del sistema que nos dice error empezando en la línea 9 aquí lo tenemos línea 9 es el ser que intentamos hacer y la descripción del error es un área 42 399 en el código de error es de ahora con dice no se puede realizar una operación de manipulación de datos ya que la vista tiene una instrucción de sólo lectura que es la que le colocamos aquí por eso cuando intentamos hacer el inserm no es posible realizarlo digamos que fuéramos a hacer en lugar de un insert vamos a hacer una ley te decimos update de clientes nombres de nuestra vista set vamos a actualizar la ciudad ciudad vamos a decirle que coloque el nombre de ciudad san juan cerramos comillas y es todo les decimos que lo actualice en el campo nombre decimos where nombre sea igual vamos a hacer un selecto en nuestra vista a ver qué nombre podemos actualizar vamos a utilizar el nombre de juan pérez que está en la ciudad de santiago vamos a decirle juan pérez actualiza me utilizando nuestra lista de clientes el nombre de ciudad colocando san juan en donde el nombre de empleado sea juan pérez la jota mayúscula debe ir idéntico al registro que ya existe seleccionamos cuando intentamos hacer la actualización de nuevo tenemos aquí un bloqueo del sistema y nos dice igual no se puede realizar operación de manipulación de datos en una vista con restricción de sólo lectura que es como tenemos a nuestra vista ve clientes así que vimos cómo trabaja nuestra restricción with read audi con las vistas en ahora con sql limpiamos nuestra salida de consola y limpiamos nuestro editor bien vamos a explorar ahora lo que son las vistas materializadas como sabemos en ahora con sql una vista es una tabla virtual que representa el resultado de una consulta y cada vez que ejecutemos start o actualicemos esta vista pues ahora cual convierte estas operaciones en consultas o actualizaciones de las tablas usadas para definir esta vista pues entonces una vista materializada utiliza una aproximación diferente es decir el resultado de la consulta se almacena en una tabla real que se actualiza de forma periódica a partir de las tablas originales es una especie de copia de una tabla original que nos sirven para realizar operaciones sin tocar las tablas originales es como una copia que hacemos para realizar alguna prueba de algo y al final pues el resultado sería el mismo que utilizando la tabla original pero sin tocar la misma si nos vamos a nuestro explorador de objetos en la sección de vistas vemos la vista de clientes que con la que hemos estado trabajando aquí vemos en la sección de columnas nombre y ciudad que son los campos que estamos utilizando estos campos pertenecen a la tabla de emplear qué es la tabla base de la cual tomamos los campos para crear la vista de clientes en la data vemos los registros que se están tomando de los campos en cuestión cualquier cambio que hagamos utilizando esta vista va a afectar directamente a la tabla de empleados en estos campos nombre y ciudad entonces vamos a crear una vista materializada utilizando nuestra tabla de empleados para que veamos cómo trabaja la funcionalidad vamos a decirle al sistema create y colocamos la instrucción materialista y luego colocamos vivo colocamos el nombre de nuestra vista vamos a colocarle de m para representar vista materializadas guión empleados y luego debajo decimos as y colocamos debajo se lee asterisco from empleados punto y coma seleccionamos y ejecutamos esta instrucción el sistema nos dice vista materializada careada crea la vista materializadas bm empleados con la extrusión selecciona métodos los campos de la tabla empleados como es una vista materializada pues ahora col en nuestro explorador de objetos tiene un apartado especial para este tipo de vistas que es active real live view aquí está le hacemos clic a esta sección de objetos damos un refresh y aquí está bm empleados cuando le hacemos un clic vemos todos los campos que utiliza la vista y cuando nos vamos a data vemos igualmente todos los registros de la tabla empleados cualquier prueba que necesitemos hacer en el sistema con algún programa de algo utilizando la tabla empleados por asuntos de protección utilizamos la vista materializada bm empleados que contiene toda la estructura las restricciones y los registros de nuestra tabla empleado y hacemos nuestra prueba y todo esto sin tocar nuestra tabla empleados originales esa es la funcionalidad de las vistas materializadas en ahora con sql y bien eso es todo por ahora referente a el bloqueo de vistas y la creación de vistas materializadas en ahora con sql no sabemos en una siguiente entrega gracias por su atención y hasta pronto